<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Rosengren.me - url.action and outbound url matching using current request parameters</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">

        <meta property="og:type" content="article"/>
        <meta property="og:image" content="http://www.rosengren.me/assets/images/badge.jpg" />
        <meta property="og:description" content="Say that you have a pretty standard app with the /home/index/id routing.

"/>

        <!--[if lt IE 9]>
           <script>
              document.createElement('nav');
              document.createElement('header');
              document.createElement('section');
              document.createElement('footer');
              document.createElement('article');
              document.createElement('time');
           </script>
        <![endif]-->

        <link rel="stylesheet" href="/assets/styles/syntax.css">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" href="/assets/styles/rosengren.css">

    </head>
    <body>
      <div class="navbar-menu-toggle" id="menu-toggle"></div>
      <nav class="navbar" id="navbar-menu">
        <div class="navbar-menu collapse">
          <a class="navbar-menu-item navbar-menu-title navbar-menu-item--home" href="/">home</a>
          <a class="navbar-menu-item navbar-menu-item--blog" href="/blog">blog</a>
        </div>
        <ul class="navbar-menu navbar-spots right collapse">
          <li class="navbar-menu-item spot">
            <div class="spot-bubble">
              <a href="http://www.linkedin.com/in/srosengren" target="_blank" class="fa fa-linkedin"></a>
            </div>
            <span class="spot-title">Linkedin</span>
          </li>
          <li class="navbar-menu-item spot">
            <div class="spot-bubble">
              <a href="https://twitter.com/srrosengren" target="_blank" class="fa fa-twitter"></a>
            </div>
            <span class="spot-title">Twitter</span>
          </li>
          <li class="navbar-menu-item spot">
            <div class="spot-bubble">
              <a href="https://github.com/srosengren" target="_blank" class="fa fa-github"></a>
            </div>
            <span class="spot-title">Github</span>
          </li>
          <li class="navbar-menu-item spot">
            <div class="spot-bubble">
              <a href="https://plus.google.com/100467627792652344906/posts?rel=author" target="_blank" class="fa fa-google-plus"></a>
            </div>
            <span class="spot-title">G+</span>
          </li>
          <li class="navbar-menu-item spot">
            <div class="spot-bubble">
              <a href="javascript:;" id="mail-link" class="fa fa-envelope"></a>
            </div>
            <span class="spot-title">Mail</span>
          </li>
        </ul>
      </nav>
      <div class="main-content" id="content">
          <div class="container">
	<articlec class="post">
		<header>
			<h1 class="post__title">url.action and outbound url matching using current request parameters</h1>
			<div class="post__byline">
				<time datetime="2013-02-26 13:09:00 +0100">26 Feb 2013</time>
				development, MVC, asp.net, gotchas, and web
			</div>
		</header>
		<div class="post__content"><p>Say that you have a pretty standard app with the /home/index/id routing.</p>

<p>You have a page with the following <strong>route /home/index/1</strong> and on this page you want a link back to <strong>/home/index</strong> so you use</p>

<p><div class='highlight'><pre><code class='c#'><span class='n'>@Url</span><span class='p'>.</span><span class='n'>Action</span><span class='p'>(</span><span class='s'>&quot;index,&quot;</span><span class='n'>home</span><span class='s'>&quot;)</span>
</code></pre></div></p>

<p>to generate the correct link. But you notice that the generated link have the following href <strong>/home/index/</strong>, ie the same route that you are currently on, why is that?</p>

<p>Well it turns out that Url.Action has a flow for generating your anchor tags. It first looks to the values that you explicitly provide, then to values from the current request (your id parameter) and lastly to defaults. This means that you can&#8217;t even override the id parameter by setting the routevalue object to null, you actually have to explicitly set the id parameter to an empty string.</p>

<p><div class='highlight'><pre><code class='c#'><span class='n'>@Url</span><span class='p'>.</span><span class='n'>Action</span><span class='p'>(</span><span class='s'>&quot;index&quot;</span><span class='p'>,</span><span class='s'>&quot;home&quot;</span><span class='p'>,</span><span class='k'>new</span> <span class='p'>{</span> <span class='n'>id</span> <span class='p'>=</span> <span class='s'>&quot;&quot;</span> <span class='p'>})</span>
</code></pre></div></p></div>
	</article>
</div>
      </div> <!-- /container -->
      <footer class="container footer-content">
        Powered by <a href="http://http://jekyllrb.com/" target="_blank">Jekyll</a>, hosted on <a href="https://github.com/" target="_blank">Github</a>, compiled using <a href="http://www.ruby-lang.org/en/" target="_blank">Ruby</a> and <a href="http://http://python.org/" target="_blank">Python</a> by a <a href="http://www.microsoft.com/net" target="_blank">.NET</a> guy.
      </footer>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-41772613-1', 'rosengren.me');
          ga('send', 'pageview');

          document.getElementById('mail-link').href = 'mailto:' + 'sebastian' + '@' + 'rosengren' + '.me';

          document.getElementById('menu-toggle').addEventListener('click', function(){
            var navbar = document.getElementById('navbar-menu');
            if(navbar.className.indexOf('open') > 0){
              navbar.className = navbar.className.replace(' open','');
            } else {
              navbar.className = navbar.className + ' open';
            }
          });

          document.getElementById('content').addEventListener('click',function(){
            var navbar = document.getElementById('navbar-menu');
            if(navbar.className.indexOf('open') > 0){
              navbar.className = navbar.className.replace(' open','');
            }
          })
        </script>
    </body>
</html>
