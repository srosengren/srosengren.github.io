<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Rosengren.me - Manually removing ContentTypes from Orchard can be tricky.</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Rosengren.me</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>Rosengren.me: Manually removing ContentTypes from Orchard can be tricky.</h2>
<p class="meta">26 Sep 2012</p>

<div class="post">
<p>I was experimenting with a new contentpart widget tonight, and when I was done I had a couple of UpdateFromX methods in my migrations.cs file. So I thought to myself, this doesn&#8217;t look very good, lets delete everything from the DB and then combine this to a pretty Create method instead. At first I thought, hey maybe I&#8217;ll only have to remove the table that stores the records themselved. This was of course not enought. I realized that I also had to remove it from the Orchard_Framework_DataMigrationRecord and Orchard_Framework_ContentTypeRecord tables. I think this would be it if I hadn&#8217;t been clever enough to actually create a couple of widgets and place them on the layer that displays on my homepage.</p>

<p>This was of course happening while I was struggling with som multi-tenancy issues so I left this here thinking I was done and started to tackle one of my subsites. Well that site would of course not start and instead gave me this error: <strong>no row with the given identifier exists&#124;orchard.contentmanagement.records.contentitemrecord#15&#93;</strong></p>

<p>Now that I think back I realize that this error message actually makes a lot of sense. I had a contentrecord with the ContentType_id set to the removed contentype&#8217;s id (<strong>15</strong>) in my&amp;amp Orchard_Framework_ContentItemRecord table. I thought that this would be it and removed it. But there was still a final puzzlepiece missing, the Orchard_Framework_ContentItemVersionRecord that contained a row with the id of the removed record.</p>

<p>There are also a couple of tables that might have to be considered if you plan on making major changes while cleaning up your migration file and these are the Settings_* tables. They contain the settings for your record/part and are worth looking into if you are changing the settings during cleanup.</p>
</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/yourusername/">github.com/yourusername</a><br />
                  <a href="http://twitter.com/yourusername/">twitter.com/yourusername</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-41772613-1', 'rosengren.me');
          ga('send', 'pageview');

        </script>
    </body>
</html>
