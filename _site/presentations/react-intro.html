<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Rosengren.me - Intro to React</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content=" I'm one of those guys that code thingamajigs, sometimes for mobile devices, but mostly for the web using Javascript and css/less. ">

        <meta property="og:type" content="website"/>
        <meta property="og:image" content="http://www.rosengren.me/assets/images/badge.jpg" />
        <meta property="og:description" content=" I'm one of those guys that code thingamajigs, sometimes for mobile devices, but mostly for the web using Javascript and css/less. "/>

        <!--[if lt IE 9]>
           <script>
              document.createElement('nav');
              document.createElement('header');
              document.createElement('section');
              document.createElement('footer');
              document.createElement('article');
              document.createElement('time');
           </script>
        <![endif]-->
        <link rel="stylesheet" href="/assets/styles/rosengren.css">
        <link rel="stylesheet" href="/assets/styles/pure-min.css">
		<link rel="stylesheet" href="/assets/styles/presentation.css">

		<style>
			figure {
				margin-right: 20px;
			}
		</style>

    </head>
    <body>
		<div class="slide">

	<h1>React</h1>

	<h2>What? Why?</h2>
	<ul>
		<li> A viewengine</li>
		<li> Not a framework, coexists with others</li>
		<li> Render on every change</li>
		<li> Templates? We've got javascript</li>
		<li> Components</li>
		<li> Virtual DOM</li>
		<li> Lightweight description, not actual DOM</li>
		<li> Easy isomorphism</li>
		<li> Learn once, use everywhere</li>
		<li> Enables the developer to do the right thing (immutability)</li>
		<li> "Throwaway code" (loosely coupled) = Easy to iterate</li>
	</ul>

	<p>React wraps an imperative API with a declarative one.</p>

</div>

<div class="slide">

	<h2>JSX</h2>
	<ul>
		<li>Full power of javascript</li>
		<li>Not html, neither is templates</li>
		<li>Single event handler</li>
		<li>React native</li>
	</ul>

	<div class="pure-g">
		<div class="pure-u-1-2">

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">ProfileImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">Bio</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
<span class="k">return</span> <span class="p">(</span>
 <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
   <span class="o">&lt;</span><span class="nx">ProfileImage</span> <span class="nx">url</span><span class="o">=</span><span class="s2">&quot;urlToImage&quot;</span> <span class="o">/&gt;</span>
 <span class="o">&lt;</span><span class="err">/div&gt;</span>
 <span class="p">)</span>
<span class="p">}</span></code></pre></figure>

			This is...
		</div>
		<div class="pure-u-1-2">

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">ProfileImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">,{</span><span class="nx">src</span><span class="o">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">})</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">Bio</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
    <span class="s1">&#39;div&#39;</span><span class="p">,</span>
    <span class="kc">null</span><span class="p">,</span>
    <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
      <span class="s1">&#39;h2&#39;</span><span class="p">,</span>
      <span class="kc">null</span><span class="p">,</span>
      <span class="nx">props</span><span class="p">.</span><span class="nx">title</span>
    <span class="p">),</span>
    <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
      <span class="nx">ProfileImage</span><span class="p">,</span>
      <span class="p">{</span><span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;urlToImage&quot;</span><span class="p">}</span>
    <span class="p">)</span>
  <span class="p">)</span>
<span class="p">}</span></code></pre></figure>

		...transpiled into this.
		</div>
	</div>
</div>

<div class="slide">

<h2>Components</h2>

<div class="pure-g">
	<div class="pure-u-1-3" style="display: flex;align-items: center;">
		<ul>
			<li>Templates separate technologies, not concerns</li>
			<li>Only way in is props, only thing out is a view</li>
		</ul>
	</div>
	<div class="pure-u-2-3">
		<img src="/media/react-flow.jpg" style="width: 100%" />
	</div>
</div>

<div class="pure-g">
	<div class="pure-u-1-2">
<h3>Stateful</h3>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">MyComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">number</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">increment</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">number</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span> <span class="o">+</span> <span class="mi">1</span><span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">increment</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="err">/button&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="kr">class</span> <span class="nx">MyComponent</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="nx">number</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">increment</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">increment</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">number</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span> <span class="o">+</span> <span class="mi">1</span><span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">increment</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="err">/button&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

	<ul>
		<li>Has a backing instance (this)</li>
		<li>Lifecycle methods</li>
		<li>Access to this.state</li>
	</ul>
	</div>
	<div class="pure-u-1-2">
<h3>Stateless</h3>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">MyComponent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">increment</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">number</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="err">/button&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">)</span>
<span class="p">}</span></code></pre></figure>


	<ul>
		<li>Pure function (No side effects)</li>
		<li>Gets props as as an argument</li>
		<li>Faster path to render</li>
	</ul>
	</div>
</div>
</div>

<div class="slide">

<h2>Render into DOM</h2>
<div class="pure-g">
	<div class="pure-u-1-2">

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;MountNode&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>



<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">MainComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span> <span class="nx">world</span><span class="o">!&lt;</span><span class="err">/h1&gt;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
  <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">MainComponent</span><span class="p">),</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;MountNode&#39;</span><span class="p">)</span>  
<span class="p">)</span></code></pre></figure>

		This is...
	</div>
	<div class="pure-u-1-2">

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;MountNode&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

		...rendered into this.
	</div>
</div>

<div style="height: 100px"></div>

Common: 
<ul>
<li> Top level component </li>
<li> Single entry</li>
</ul>

Also:
 <ul>
<li> Augment existing app with sprinkles of React.</li>
</ul>
</div>

<div class="slide">

<h2>If statements</h2>
<div class="pure-g">
	<div class="pure-u-1-2">
		This would be...

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">ProfileImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">isIcon</span><span class="p">)</span>
        <span class="o">&lt;</span><span class="nx">i</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;icon&quot;</span><span class="o">&gt;&lt;</span><span class="err">/i&gt;</span>
      <span class="k">else</span>
        <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">}</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">)</span>
<span class="p">}</span></code></pre></figure>


	</div>
	<div class="pure-u-1-2">

...transpiled into this, illegal javascript.


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">ProfileImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
    <span class="s1">&#39;div&#39;</span><span class="p">,</span>
    <span class="kc">null</span><span class="p">,</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">isIcon</span><span class="p">)</span>
      <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
        <span class="s1">&#39;i&#39;</span><span class="p">,</span>
        <span class="p">{</span><span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;icon&#39;</span><span class="p">}</span>
      <span class="p">)</span>
    <span class="k">else</span>
      <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
        <span class="s1">&#39;img&#39;</span><span class="p">,</span>
        <span class="p">{</span><span class="nx">url</span><span class="o">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">}</span>
      <span class="p">)</span>
  <span class="p">)</span>
<span class="p">}</span></code></pre></figure>

	</div>
</div>
<div class="pure-g" style="margin-top: 100px">
	<div class="pure-u-1-2">
		Whereas this would be...

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">ProfileImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="p">{</span> <span class="nx">props</span><span class="p">.</span><span class="nx">isIcon</span> <span class="o">?</span>
        <span class="o">&lt;</span><span class="nx">i</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;icon&quot;</span><span class="o">&gt;&lt;</span><span class="err">/i&gt;</span>
      <span class="o">:</span>
        <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">}</span> <span class="o">/&gt;</span>
      <span class="p">}</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">)</span>
<span class="p">}</span></code></pre></figure>

	</div>
	<div class="pure-u-1-2">

...transpiled into this, totally legit javascript.


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">ProfileImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
    <span class="s1">&#39;div&#39;</span><span class="p">,</span>
    <span class="kc">null</span><span class="p">,</span>
    <span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">isIcon</span> <span class="o">?</span>
      <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
        <span class="s1">&#39;i&#39;</span><span class="p">,</span>
        <span class="p">{</span><span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;icon&#39;</span><span class="p">}</span>
      <span class="p">)</span>
      <span class="o">:</span>
      <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
        <span class="s1">&#39;img&#39;</span><span class="p">,</span>
        <span class="p">{</span><span class="nx">url</span><span class="o">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">}</span>
      <span class="p">))</span>
  <span class="p">)</span>
<span class="p">}</span></code></pre></figure>

	</div>
</div>
</div>

<div class="slide">

<h2>Loops/lists</h2>

Same as if statments, can't have a for loop in function call


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Menu</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
      <span class="nx">props</span><span class="p">.</span><span class="nx">menuItems</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
        <span class="o">&lt;</span><span class="nx">MenuItem</span> <span class="nx">item</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span> <span class="o">/&gt;</span>
      <span class="p">})</span>
    <span class="o">&lt;</span><span class="err">/ul&gt;</span>
  <span class="p">)</span>
<span class="p">}</span></code></pre></figure>

</div>

<div class="slide">

<h2>Composition</h2>
<ul>
<li>Common pattern to have a stateful component composed with stateless children (controller view)</li>
<li>Children has no knowledge of parent</li>
<li>Communicates "up" with callbacks or actions.</li>
</ul>
</div>

<div class="slide subslide">

<h3>State vs props</h3>
<ul>
<li>State is a side effect</li>
<li>Pure functions</li>
<li>Single source of truth</li>
<li>Which ancestor has changed?</li>
<li>Don't convert props to state, changes ownership, becomes stale.</li>
</ul>


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">//NO! Bad developer!</span>
<span class="kd">var</span> <span class="nx">ItsMine</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createCLass</span><span class="p">({</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">theOneRing</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">theOneRing</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">theOneRing</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">//Better</span>
<span class="kd">var</span> <span class="nx">MaybeILook</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createCLass</span><span class="p">({</span>
  <span class="nx">getOwnRing</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ring</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">myRing</span><span class="o">:</span> <span class="nx">ring</span><span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">myRing</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">theOneRing</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">//Often best</span>
<span class="kd">var</span> <span class="nx">DisplayPrettyRing</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">theOneRing</span><span class="p">}</span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span>
<span class="p">}</span></code></pre></figure>

</div>

<div class="slide subslide">

<h3>Controller view</h3>


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Menu</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">selectItem</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">itemId</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">selectedItemId</span><span class="o">:</span> <span class="nx">itemId</span><span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">MenuItem</span> <span class="nx">select</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">selectItem</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="mi">1</span><span class="p">)}</span> <span class="nx">isSelected</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">selectedItemId</span> <span class="o">===</span> <span class="mi">1</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="nx">Item1</span>
        <span class="o">&lt;</span><span class="err">/MenuItem&gt;</span>
        <span class="o">&lt;</span><span class="nx">MenuItem</span> <span class="nx">select</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">selectItem</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="mi">2</span><span class="p">)}</span> <span class="nx">isSelected</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">selectedItemId</span> <span class="o">===</span> <span class="mi">2</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="nx">Item2</span>
        <span class="o">&lt;</span><span class="err">/MenuItem&gt;</span>
        <span class="o">&lt;</span><span class="nx">MenuItem</span> <span class="nx">select</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">selectItem</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">isSelected</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">selectedItemId</span> <span class="o">===</span> <span class="mi">3</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">h4</span><span class="o">&gt;</span><span class="nx">Complex</span> <span class="nx">child</span><span class="o">&lt;</span><span class="err">/h4&gt;</span>
          <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Desc</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
        <span class="o">&lt;</span><span class="err">/MenuItem&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="kd">var</span> <span class="nx">MenuItem</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">onClick</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">)</span>
<span class="p">}</span></code></pre></figure>

</div>
<div class="slide subslide">

<h3>Mixins</h3>


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">StoreMixin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">componentWillMount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unsubscribe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">storeChanged</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">componentWillUnmount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">StoreListener</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span><span class="nx">StoreMixin</span><span class="p">],</span>
  <span class="nx">store</span><span class="o">:</span> <span class="nx">MyStore</span><span class="p">,</span>
  <span class="nx">storeChanged</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="nx">MyStore</span><span class="p">.</span><span class="nx">get</span><span class="p">()});</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></figure>


<ul>
<li>Provides lifecycle hooks</li>
<li>Magic merge of lifecycle hooks</li>
<li>Might use the same state field</li>
<li>Crashes if mixins define the same props/functions</li>
<li>Not available on es6 classes</li>
</ul>
</div>

<div class="slide subslide">

<h3>Higher order components</h3>


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">StoreHO</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Component</span><span class="p">,</span><span class="nx">store</span><span class="p">,</span><span class="nx">mapping</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
    <span class="nx">componentWillMount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">unsubscribe</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">storeUpdate</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">componentWillUnmount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">storeUpdate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span><span class="nx">mapping</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">get</span><span class="p">()));</span>
    <span class="p">},</span>
    <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Component</span> <span class="p">{...</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">}</span> <span class="p">{...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">}</span> <span class="o">/&gt;</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">StoreListener</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">}</span>

<span class="nx">StoreListener</span> <span class="o">=</span> <span class="nx">StoreHO</span><span class="p">(</span><span class="nx">StoreListener</span><span class="p">,</span><span class="nx">MyStore</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">storeData</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">data</span><span class="o">:</span> <span class="nx">storeData</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></figure>


<ul>
<li>Has its own backing instance (this) with own state</li>
<li>Infinitely chainable/nestable</li>
<li>Only collision risk is props being overwritten</li>
<li>Can wrap stateless components</li>
<li>Transparent</li>
</ul>
</div>
<div class="slide subslide">

<h3>Wrapper components</h3>


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">StoreWrapper</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">componentWillMount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unsubscribe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">storeUpdate</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">componentWillUnmount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">storeUpdate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span><span class="nx">mapping</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">get</span><span class="p">()));</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Children</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">cloneElement</span><span class="p">(</span><span class="nx">child</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">StoreConsumer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">Application</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">StoreWrapper</span> <span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">MyStore</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">StoreConsumer</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="err">/StoreWrapper&gt;</span>
    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></figure>

<ul>
<li>Mostly used to provide layout wrapping</li>
<li>Easy to provide separate props for wrapper/child</li>
<li>Can wrap stateless components</li>
<li>Hidden coupling</li>
<li>Has to provide layout</li>
<li>Opaque</li>
</ul>
</div>

<div class="slide subslide">

<h1>Flux</h1>

<h2>Types of flux</h2>

<h3>Flux with dispatcher, Flux utils</h3>


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">appDispatcher</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Flux</span><span class="p">.</span><span class="nx">Dispatcher</span><span class="p">();</span>

<span class="kr">class</span> <span class="nx">Store</span> <span class="kr">extends</span> <span class="nx">PseudoStore</span> <span class="p">{</span>
  <span class="nx">number</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">unregisterToken</span><span class="o">:</span> <span class="nx">appDispatcher</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">action</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;ACTION_INCREMENT&#39;</span><span class="p">){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">number</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">emitChange</span><span class="p">();</span>
  <span class="p">});</span>  
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">NumberComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">storeData</span><span class="o">:</span> <span class="nx">Store</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">componentWillMount</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unregisterStore</span> <span class="o">=</span> <span class="nx">Store</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">onStoreChange</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">componentWillUnmount</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unRegisterStore</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">onStoreChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
      <span class="nx">storeData</span><span class="o">:</span> <span class="nx">Store</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">storeDate</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></figure>


<ul>
<li>Very verbose</li>
<li>Magical strings</li>
</ul>

<h3>Flux without dispatcher, Reflux</h3>


<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">incrementAction</span> <span class="o">=</span> <span class="nx">Reflux</span><span class="p">.</span><span class="nx">createAction</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">Store</span> <span class="o">=</span> <span class="nx">Reflux</span><span class="p">.</span><span class="nx">createStore</span><span class="p">({</span>
  <span class="nx">number</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="nx">incrementAction</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">increment</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">increment</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">number</span><span class="o">++</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">number</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">NumberComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{};</span>
  <span class="p">},</span>
  <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span><span class="nx">Reflux</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="nx">Store</span><span class="p">,</span><span class="s1">&#39;onStoreChange&#39;</span><span class="p">)],</span>
  <span class="nx">onStoreChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">storeState</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
      <span class="nx">storeData</span><span class="o">:</span> <span class="nx">storeState</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">storeDate</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></figure>

<ul>
<li>Every action is a dispatcher</li>
<li>Stores can listen to individual actions</li>
</ul>


<h3>Flux without flux, Redux</h3>

<h2>Immutable data</h2>
<ul>
<li>Easy to see if an object has changed</li>
<li>oldObject === newObject instead of oldObject.prop1 === newObject.prop1 || oldObject.prop2 === ...</li>
<li>Removes one source of side effects.</li>
<li>Object.freeze, extreme immutability</li>
</ul>

</div>


		<script>
			(function (i, s, o, g, r, a, m) {
				i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
					(i[r].q = i[r].q || []).push(arguments)
				}, i[r].l = 1 * new Date(); a = s.createElement(o),
				m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
			})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

			ga('create', 'UA-41772613-1', 'rosengren.me');
			ga('send', 'pageview');
		</script>
</body>
</html>
